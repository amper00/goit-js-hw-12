import{a as g,i as d,S as L}from"./assets/vendor-c493984e.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();let i=1;const p=40;let c="",u=0,m=0;document.getElementById("search-form").addEventListener("submit",async n=>{n.preventDefault();const o=document.getElementById("search-query").value;o!==c&&(c=o,i=1,u=0,m=0,document.querySelector(".gallery").innerHTML="",h()),await y(o)});document.getElementById("load-more").addEventListener("click",async()=>{await y(c)});async function y(n){const o=document.querySelector(".loader"),r=document.getElementById("load-more");o.classList.remove("hidden"),o.style.display="block",r.classList.add("hidden");const t=`https://pixabay.com/api/?key=44974018-ca766bb5bf44f97c206908e6f&q=${n}&image_type=photo&orientation=horizontal&safesearch=true&page=${i}&per_page=${p}`;try{const e=await g.get(t);o.classList.add("hidden"),o.style.display="none",u=e.data.totalHits,m=Math.ceil(u/p),e.data.hits.length===0&&i===1?d.error({title:"Error",message:"Przepraszamy, nie ma obrazów zgodnych z wyszukiwaniem. Spróbuj ponownie!"}):(v(e.data.hits),i++,i>m?(d.error({position:"topRight",message:"We're sorry, there are no more posts to load"}),h()):(f(),w()))}catch(e){o.classList.add("hidden"),o.style.display="none",d.error({title:"Error",message:`There was a problem with the fetch operation: ${e}`}),console.log(e)}}function v(n){const o=document.querySelector(".gallery"),r=n.map(s=>{const t=document.createElement("li");t.classList.add("gallery-item");const e=document.createElement("a");e.classList.add("gallery-link"),e.href=s.largeImageURL,e.setAttribute("data-lightbox","gallery"),e.setAttribute("data-title",`❤️ ${s.likes} 👁️ ${s.views} 💬 ${s.comments} ⬇️ ${s.downloads}`);const a=document.createElement("img");a.classList.add("gallery-image"),a.src=s.webformatURL,a.alt=s.tags;const l=document.createElement("div");return l.classList.add("image-info"),l.innerHTML=`
            <div class="info"><span>Likes</span> ${s.likes}</div>
            <div class="info"><span>Views</span> ${s.views}</div>
            <div class="info"><span>Comments</span> ${s.comments}</div>
            <div class="info"><span>Downloads</span> ${s.downloads}</div>
        `,e.appendChild(a),t.appendChild(e),t.appendChild(l),t});r.forEach(s=>o.appendChild(s)),new L(".gallery a",{captionType:"attr",captionsData:"alt",captionDelay:250}),r.length>0&&f()}function f(){document.getElementById("load-more").classList.remove("hidden")}function h(){document.getElementById("load-more").classList.add("hidden")}function w(){const n=document.querySelectorAll(".gallery-item");if(n.length>0){const o=n[0].getBoundingClientRect().height;window.scrollBy({top:2*o,behavior:"smooth"})}}
//# sourceMappingURL=commonHelpers.js.map
